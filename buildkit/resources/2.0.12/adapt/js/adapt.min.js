(function () {
	//console.log("Adapt Framework - loading...");

	if (!window.$) {
		//SUPPORT FOR V1.1.1 JQUERY SWAPPING >
		//Test for ie8
	    var IE = (function() { 
	        if (document.documentMode) {
	            return document.documentMode;
	        }
	        return false;
	    })();

	    //Load jquery
        Modernizr.load([
            {
                test: IE == 8,
                yep: 'libraries/jquery.js',
                nope: 'libraries/jquery.v2.js',
                complete: loadAdapt
            }
        ]);
        //< SUPPORT FOR V1.1.1 JQUERY SWAPPING
	} else loadAdapt();


	function loadAdapt() {

		require.config({
			baseUrl: "./", //FIX FOR MODERNIZER BASEURL CHANGES
			shim: {
				'core': [
					'templates'
				],
				'plugins': [
					'core',
					'templates'
				]
			},
			waitSeconds: 20
		});

		require.onError = function(err) {
			alert(err);
		};

		require([
			'plugins'
		], function() {
			console.log("Adapt Framework - libraries, templates, core and plugins loaded");
		});
	}

})();
